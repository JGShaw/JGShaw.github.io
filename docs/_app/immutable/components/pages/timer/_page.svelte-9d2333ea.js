import{S as tt,i as et,s as lt,k as b,a as z,q as w,l as T,m as g,c as B,r as k,h as u,n as D,b as I,G as o,I as Y,B as Z,J as st,K as rt,H as at,M as ot,p as G,u as J}from"../../../chunks/index-e7c45b38.js";import{m as R,l as P}from"../../../chunks/time-bd49c44f.js";function $(a,t,r){const s=a.slice();return s[2]=t[r],s[5]=r,s}function N(a){let t,r,s;return{c(){t=b("tr"),r=b("td"),s=w("Timing in progress"),this.h()},l(f){t=T(f,"TR",{});var l=g(t);r=T(l,"TD",{colspan:!0,class:!0});var i=g(r);s=k(i,"Timing in progress"),i.forEach(u),l.forEach(u),this.h()},h(){D(r,"colspan","5"),D(r,"class","svelte-1b0trvz")},m(f,l){I(f,t,l),o(t,r),o(r,s)},d(f){f&&u(t)}}}function nt(a){let t,r=R(a[2].half-a[1].at(a[5]-1).end)+"",s,f,l,i=R(a[2].end-a[1].at(a[5]-1).end)+"",n;return{c(){t=b("td"),s=w(r),f=z(),l=b("td"),n=w(i),this.h()},l(e){t=T(e,"TD",{style:!0,class:!0});var d=g(t);s=k(d,r),d.forEach(u),f=B(e),l=T(e,"TD",{style:!0,class:!0});var m=g(l);n=k(m,i),m.forEach(u),this.h()},h(){G(t,"width","20%"),D(t,"class","svelte-1b0trvz"),G(l,"width","20%"),D(l,"class","svelte-1b0trvz")},m(e,d){I(e,t,d),o(t,s),I(e,f,d),I(e,l,d),o(l,n)},p(e,d){d&2&&r!==(r=R(e[2].half-e[1].at(e[5]-1).end)+"")&&J(s,r),d&2&&i!==(i=R(e[2].end-e[1].at(e[5]-1).end)+"")&&J(n,i)},d(e){e&&u(t),e&&u(f),e&&u(l)}}}function dt(a){let t,r=R(a[2].half-a[2].start)+"",s,f,l,i=R(a[2].end-a[2].start)+"",n;return{c(){t=b("td"),s=w(r),f=z(),l=b("td"),n=w(i),this.h()},l(e){t=T(e,"TD",{style:!0,class:!0});var d=g(t);s=k(d,r),d.forEach(u),f=B(e),l=T(e,"TD",{style:!0,class:!0});var m=g(l);n=k(m,i),m.forEach(u),this.h()},h(){G(t,"width","20%"),D(t,"class","svelte-1b0trvz"),G(l,"width","20%"),D(l,"class","svelte-1b0trvz")},m(e,d){I(e,t,d),o(t,s),I(e,f,d),I(e,l,d),o(l,n)},p(e,d){d&2&&r!==(r=R(e[2].half-e[2].start)+"")&&J(s,r),d&2&&i!==(i=R(e[2].end-e[2].start)+"")&&J(n,i)},d(e){e&&u(t),e&&u(f),e&&u(l)}}}function x(a){let t,r,s=a[5]+1+"",f,l,i,n=(a[2].target/1e3).toFixed(1)+"",e,d,m,h,q=R(a[2].end-a[1].at(0).start)+"",C,L;function K(y,v){return y[5]==0?dt:nt}let A=K(a)(a);return{c(){t=b("tr"),r=b("td"),f=w(s),l=z(),i=b("td"),e=w(n),d=z(),A.c(),m=z(),h=b("td"),C=w(q),L=z(),this.h()},l(y){t=T(y,"TR",{});var v=g(t);r=T(v,"TD",{style:!0,class:!0});var M=g(r);f=k(M,s),M.forEach(u),l=B(v),i=T(v,"TD",{style:!0,class:!0});var p=g(i);e=k(p,n),p.forEach(u),d=B(v),A.l(v),m=B(v),h=T(v,"TD",{style:!0,class:!0});var H=g(h);C=k(H,q),H.forEach(u),L=B(v),v.forEach(u),this.h()},h(){G(r,"width","20%"),D(r,"class","svelte-1b0trvz"),G(i,"width","20%"),D(i,"class","svelte-1b0trvz"),G(h,"width","20%"),D(h,"class","svelte-1b0trvz")},m(y,v){I(y,t,v),o(t,r),o(r,f),o(t,l),o(t,i),o(i,e),o(t,d),A.m(t,null),o(t,m),o(t,h),o(h,C),o(t,L)},p(y,v){v&2&&n!==(n=(y[2].target/1e3).toFixed(1)+"")&&J(e,n),A.p(y,v),v&2&&q!==(q=R(y[2].end-y[1].at(0).start)+"")&&J(C,q)},d(y){y&&u(t),A.d()}}}function ft(a){let t,r,s,f,l,i,n,e,d,m,h,q,C,L,K,S,A,y,v,M,p=a[0]>0&&a[1].length>=a[0]/2&&N(),H=a[1],E=[];for(let _=0;_<H.length;_+=1)E[_]=x($(a,H,_));return{c(){t=b("table"),p&&p.c(),r=z(),s=b("tr"),f=b("td"),l=w("Lap"),i=z(),n=b("td"),e=w("Target"),d=z(),m=b("td"),h=w("Half"),q=z(),C=b("td"),L=w("Full"),K=z(),S=b("td"),A=w("Total"),y=z();for(let _=0;_<E.length;_+=1)E[_].c();this.h()},l(_){t=T(_,"TABLE",{class:!0});var F=g(t);p&&p.l(F),r=B(F),s=T(F,"TR",{});var c=g(s);f=T(c,"TD",{class:!0});var O=g(f);l=k(O,"Lap"),O.forEach(u),i=B(c),n=T(c,"TD",{class:!0});var U=g(n);e=k(U,"Target"),U.forEach(u),d=B(c),m=T(c,"TD",{class:!0});var V=g(m);h=k(V,"Half"),V.forEach(u),q=B(c),C=T(c,"TD",{class:!0});var W=g(C);L=k(W,"Full"),W.forEach(u),K=B(c),S=T(c,"TD",{class:!0});var X=g(S);A=k(X,"Total"),X.forEach(u),c.forEach(u),y=B(F);for(let j=0;j<E.length;j+=1)E[j].l(F);F.forEach(u),this.h()},h(){D(f,"class","svelte-1b0trvz"),D(n,"class","svelte-1b0trvz"),D(m,"class","svelte-1b0trvz"),D(C,"class","svelte-1b0trvz"),D(S,"class","svelte-1b0trvz"),D(t,"class","timer-table svelte-1b0trvz")},m(_,F){I(_,t,F),p&&p.m(t,null),o(t,r),o(t,s),o(s,f),o(f,l),o(s,i),o(s,n),o(n,e),o(s,d),o(s,m),o(m,h),o(s,q),o(s,C),o(C,L),o(s,K),o(s,S),o(S,A),o(t,y);for(let c=0;c<E.length;c+=1)E[c].m(t,null);v||(M=[Y(t,"keypress",a[2]),Y(t,"click",a[2])],v=!0)},p(_,[F]){if(_[0]>0&&_[1].length>=_[0]/2?p||(p=N(),p.c(),p.m(t,r)):p&&(p.d(1),p=null),F&2){H=_[1];let c;for(c=0;c<H.length;c+=1){const O=$(_,H,c);E[c]?E[c].p(O,F):(E[c]=x(O),E[c].c(),E[c].m(t,null))}for(;c<E.length;c+=1)E[c].d(1);E.length=H.length}},i:Z,o:Z,d(_){_&&u(t),p&&p.d(),st(E,_),v=!1,rt(M)}}}function Q(a){typeof window<"u"&&(document.body.bgColor=a,document.querySelector('meta[name="theme-color"]').setAttribute("content",a))}function it(a,t,r){let s;at(a,P,n=>r(1,s=n)),ot(()=>{Q("white"),P.update(n=>new Array)});const f=[{color:"Blue",from:-1/0,to:-501},{color:"LawnGreen",from:-500,to:-1},{color:"Orange",from:0,to:499},{color:"Red",from:500,to:1/0}];var l=0;function i(){if(l==0){P.update(h=>(h.at(0).start=Date.now(),h)),r(0,l++,l);return}if(s.length<l/2){Q("white");return}if(l%2==1)P.update(h=>(h.at((l-1)/2).half=Date.now(),h));else{var n=l/2-1;P.update(h=>(h.at(n).end=Date.now(),h));var e=s.at(n),d=e.end-(n==0?e.start:s.at(n-1).end),m=d-e.target;for(const h of f)if(m>=h.from&&m<=h.to){Q(h.color);break}}r(0,l++,l)}return[l,s,i]}class ht extends tt{constructor(t){super(),et(this,t,it,ft,lt,{})}}export{ht as default};
