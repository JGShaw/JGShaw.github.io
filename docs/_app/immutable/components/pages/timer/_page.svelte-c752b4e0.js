import{S as tt,i as et,s as lt,k as p,a as B,q as w,l as T,m as g,c as C,r as z,h as i,n as E,b as S,G as n,I as Y,B as Z,J as rt,K as st,H as at,M as ot,p as q,u as J}from"../../../chunks/index-e7c45b38.js";import{m as A,l as P}from"../../../chunks/time-bd49c44f.js";function N(a,t,r){const s=a.slice();return s[3]=t[r],s[6]=r,s}function $(a){let t,r,s;return{c(){t=p("tr"),r=p("td"),s=w("Timing in progress"),this.h()},l(c){t=T(c,"TR",{});var l=g(t);r=T(l,"TD",{colspan:!0,class:!0});var d=g(r);s=z(d,"Timing in progress"),d.forEach(i),l.forEach(i),this.h()},h(){E(r,"colspan","5"),E(r,"class","svelte-1b0trvz")},m(c,l){S(c,t,l),n(t,r),n(r,s)},d(c){c&&i(t)}}}function nt(a){let t,r=A(a[3].half-a[2].at(a[6]-1).end)+"",s,c,l,d=A(a[3].end-a[2].at(a[6]-1).end)+"",u;return{c(){t=p("td"),s=w(r),c=B(),l=p("td"),u=w(d),this.h()},l(e){t=T(e,"TD",{style:!0,class:!0});var o=g(t);s=z(o,r),o.forEach(i),c=C(e),l=T(e,"TD",{style:!0,class:!0});var m=g(l);u=z(m,d),m.forEach(i),this.h()},h(){q(t,"width","20%"),E(t,"class","svelte-1b0trvz"),q(l,"width","20%"),q(l,"background",a[3].color),E(l,"class","svelte-1b0trvz")},m(e,o){S(e,t,o),n(t,s),S(e,c,o),S(e,l,o),n(l,u)},p(e,o){o&4&&r!==(r=A(e[3].half-e[2].at(e[6]-1).end)+"")&&J(s,r),o&4&&d!==(d=A(e[3].end-e[2].at(e[6]-1).end)+"")&&J(u,d),o&4&&q(l,"background",e[3].color)},d(e){e&&i(t),e&&i(c),e&&i(l)}}}function dt(a){let t,r=A(a[3].half-a[3].start)+"",s,c,l,d=A(a[3].end-a[3].start)+"",u;return{c(){t=p("td"),s=w(r),c=B(),l=p("td"),u=w(d),this.h()},l(e){t=T(e,"TD",{style:!0,class:!0});var o=g(t);s=z(o,r),o.forEach(i),c=C(e),l=T(e,"TD",{style:!0,class:!0});var m=g(l);u=z(m,d),m.forEach(i),this.h()},h(){q(t,"width","20%"),E(t,"class","svelte-1b0trvz"),q(l,"width","20%"),q(l,"background",a[3].color),E(l,"class","svelte-1b0trvz")},m(e,o){S(e,t,o),n(t,s),S(e,c,o),S(e,l,o),n(l,u)},p(e,o){o&4&&r!==(r=A(e[3].half-e[3].start)+"")&&J(s,r),o&4&&d!==(d=A(e[3].end-e[3].start)+"")&&J(u,d),o&4&&q(l,"background",e[3].color)},d(e){e&&i(t),e&&i(c),e&&i(l)}}}function x(a){let t,r,s=a[6]+1+"",c,l,d,u=(a[3].target/1e3).toFixed(1)+"",e,o,m,D,h=A(a[3].end-a[2].at(0).start)+"",F,G;function K(k,_){return k[6]==0?dt:nt}let H=K(a)(a);return{c(){t=p("tr"),r=p("td"),c=w(s),l=B(),d=p("td"),e=w(u),o=B(),H.c(),m=B(),D=p("td"),F=w(h),G=B(),this.h()},l(k){t=T(k,"TR",{});var _=g(t);r=T(_,"TD",{style:!0,class:!0});var M=g(r);c=z(M,s),M.forEach(i),l=C(_),d=T(_,"TD",{style:!0,class:!0});var b=g(d);e=z(b,u),b.forEach(i),o=C(_),H.l(_),m=C(_),D=T(_,"TD",{style:!0,class:!0});var I=g(D);F=z(I,h),I.forEach(i),G=C(_),_.forEach(i),this.h()},h(){q(r,"width","20%"),E(r,"class","svelte-1b0trvz"),q(d,"width","20%"),E(d,"class","svelte-1b0trvz"),q(D,"width","20%"),E(D,"class","svelte-1b0trvz")},m(k,_){S(k,t,_),n(t,r),n(r,c),n(t,l),n(t,d),n(d,e),n(t,o),H.m(t,null),n(t,m),n(t,D),n(D,F),n(t,G)},p(k,_){_&4&&u!==(u=(k[3].target/1e3).toFixed(1)+"")&&J(e,u),H.p(k,_),_&4&&h!==(h=A(k[3].end-k[2].at(0).start)+"")&&J(F,h)},d(k){k&&i(t),H.d()}}}function ct(a){let t,r,s,c,l,d,u,e,o,m,D,h,F,G,K,L,H,k,_,M,b=a[0]>0&&!a[1]&&$(),I=a[2],y=[];for(let v=0;v<I.length;v+=1)y[v]=x(N(a,I,v));return{c(){t=p("table"),b&&b.c(),r=B(),s=p("tr"),c=p("td"),l=w("Lap"),d=B(),u=p("td"),e=w("Target"),o=B(),m=p("td"),D=w("Half"),h=B(),F=p("td"),G=w("Full"),K=B(),L=p("td"),H=w("Total"),k=B();for(let v=0;v<y.length;v+=1)y[v].c();this.h()},l(v){t=T(v,"TABLE",{class:!0});var R=g(t);b&&b.l(R),r=C(R),s=T(R,"TR",{});var f=g(s);c=T(f,"TD",{class:!0});var O=g(c);l=z(O,"Lap"),O.forEach(i),d=C(f),u=T(f,"TD",{class:!0});var U=g(u);e=z(U,"Target"),U.forEach(i),o=C(f),m=T(f,"TD",{class:!0});var V=g(m);D=z(V,"Half"),V.forEach(i),h=C(f),F=T(f,"TD",{class:!0});var W=g(F);G=z(W,"Full"),W.forEach(i),K=C(f),L=T(f,"TD",{class:!0});var X=g(L);H=z(X,"Total"),X.forEach(i),f.forEach(i),k=C(R);for(let j=0;j<y.length;j+=1)y[j].l(R);R.forEach(i),this.h()},h(){E(c,"class","svelte-1b0trvz"),E(u,"class","svelte-1b0trvz"),E(m,"class","svelte-1b0trvz"),E(F,"class","svelte-1b0trvz"),E(L,"class","svelte-1b0trvz"),E(t,"class","timer-table svelte-1b0trvz")},m(v,R){S(v,t,R),b&&b.m(t,null),n(t,r),n(t,s),n(s,c),n(c,l),n(s,d),n(s,u),n(u,e),n(s,o),n(s,m),n(m,D),n(s,h),n(s,F),n(F,G),n(s,K),n(s,L),n(L,H),n(t,k);for(let f=0;f<y.length;f+=1)y[f].m(t,null);_||(M=[Y(t,"keypress",a[3]),Y(t,"click",a[3])],_=!0)},p(v,[R]){if(v[0]>0&&!v[1]?b||(b=$(),b.c(),b.m(t,r)):b&&(b.d(1),b=null),R&4){I=v[2];let f;for(f=0;f<I.length;f+=1){const O=N(v,I,f);y[f]?y[f].p(O,R):(y[f]=x(O),y[f].c(),y[f].m(t,null))}for(;f<y.length;f+=1)y[f].d(1);y.length=I.length}},i:Z,o:Z,d(v){v&&i(t),b&&b.d(),rt(y,v),_=!1,st(M)}}}function Q(a){typeof window<"u"&&(document.body.bgColor=a,document.querySelector('meta[name="theme-color"]').setAttribute("content",a))}function ft(a,t,r){let s;at(a,P,e=>r(2,s=e)),ot(()=>{Q("white"),P.update(e=>new Array)});const c=[{color:"Blue",from:-1/0,to:-501},{color:"LawnGreen",from:-500,to:-1},{color:"Orange",from:0,to:499},{color:"Red",from:500,to:1/0}];var l=0,d=!1;function u(){if(l==0){P.update(h=>(h.at(0).start=Date.now(),h)),r(0,l++,l);return}if(s.length<l/2){Q("white"),r(1,d=!0);return}if(l%2==1)P.update(h=>(h.at((l-1)/2).half=Date.now(),h));else{var e=l/2-1;P.update(h=>(h.at(e).end=Date.now(),h));var o=s.at(e),m=o.end-(e==0?o.start:s.at(e-1).end),D=m-o.target;for(const h of c)if(D>=h.from&&D<=h.to){o.color=h.color,Q(h.color);break}}r(0,l++,l)}return[l,d,s,u]}class ht extends tt{constructor(t){super(),et(this,t,ft,ct,lt,{})}}export{ht as default};
